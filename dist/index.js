!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):"object"==typeof exports?exports["vue-yandex-map"]=e(require("vue")):n["vue-yandex-map"]=e(n.vue)}(window,(function(n){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="/dist/",t(t.s=4)}([function(e,t){e.exports=n},function(n,e,t){"use strict";var r=t(0),o=t.n(r),a=new o.a({options:{},data:function(){return{options:this.options,events:{},ymapReady:!1,scriptAttached:!1}},created:function(){},methods:{attachScript:function(){var n=this;if(!this.scriptAttached){var e="//api-maps.yandex.ru/"+o.a.yandexMapOptions.version+"/?lang="+o.a.yandexMapOptions.lang;o.a.yandexMapOptions.apiKey.length&&(e+="&apikey="+o.a.yandexMapOptions.apiKey);var t=document.createElement("SCRIPT");t.setAttribute("src",e),t.setAttribute("async",""),t.setAttribute("defer",""),t.onload=function(){n.$emit("yandexmap-loaded"),window.ymaps.ready((function(){n.ymapReady=!0,n.$emit("yandexmap-ready")}))},document.body.appendChild(t),this.scriptAttached=!0,this.$emit("yandexmap-attached")}},init:function(n){console.log("init ========",n)},isReady:function(){return this.ymapReady}}});e.a=a},function(n,e,t){"use strict";function r(n,e,t,r,o,a,i,s){var c=typeof(n=n||{}).default;"object"!==c&&"function"!==c||(n=n.default);var u,d="function"==typeof n?n.options:n;if(e&&(d.render=e,d.staticRenderFns=t,d._compiled=!0),r&&(d.functional=!0),a&&(d._scopeId=a),i?(u=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(i)},d._ssrRegister=u):o&&(u=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),u)if(d.functional){d._injectStyles=u;var l=d.render;d.render=function(n,e){return u.call(e),l(n,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return{exports:n,options:d}}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t=function(n,e){var t=n[1]||"",r=n[3];if(!r)return t;if(e&&"function"==typeof btoa){var o=(i=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),a=r.sources.map((function(n){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(n," */")}));return[t].concat(a).concat([o]).join("\n")}var i,s,c;return[t].join("\n")}(e,n);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t})).join("")},e.i=function(n,t,r){"string"==typeof n&&(n=[[null,n,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<n.length;s++){var c=[].concat(n[s]);r&&o[c[0]]||(t&&(c[2]?c[2]="".concat(t," and ").concat(c[2]):c[2]=t),e.push(c))}},e}},function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}return a(n,[{key:"getOptions",value:function(){return this.options}}]),n}(),s={install:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};Object.assign(r,{version:"2.1",lang:"ru_RU",apiKey:""},e),o.a.yandexMapOptions=r;var a=new i(o.a.yandexMapOptions);n.prototype.$yandexmap=a,n.component("yandex-map",t(7).default),n.component("region-select",t(8).default)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(s),e.default=s},function(n,e,t){var r=t(6);"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);(0,t(9).default)("340003b9",r,!1,{})},function(n,e,t){"use strict";t.r(e);var r=t(3),o=t.n(r)()(!0);o.push([n.i,"\n.yandex-map_region {\n  position: relative;\n  text-align: right;\n}\n.yandex-map_region a {\n  z-index: 120;\n  display: inline-block;\n  position: absolute;\n  padding: 4px 10px;\n  top: 10px;\n  right: 10px;\n  background-color: #30b9e8;\n  color: white;\n  cursor: pointer;\n  text-decoration: none;\n}\n.yandex-map_region a.processing {\n  background-color: #7fc54e;\n}\n.yandex-map_region a.active {\n  background-color: #cc242b;\n}\n","",{version:3,sources:["webpack://src/Components/RegionSelect.vue"],names:[],mappings:";AAmPA;EAEI,kBAAA;EACA,iBAAA;AAlPJ;AA+OA;EAMQ,YAAA;EACA,qBAAA;EACA,kBAAA;EACA,iBAAA;EACA,SAAA;EAAW,WAAA;EACX,yBAAA;EACA,YAAA;EACA,eAAA;EACA,qBAAA;AAjPR;AAmPQ;EACI,yBAAA;AAjPZ;AAoPQ;EACI,yBAAA;AAlPZ",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.yandex-map_region{\n\n    position: relative;\n    text-align: right;\n\n    a{\n        z-index: 120;\n        display: inline-block;\n        position: absolute;\n        padding: 4px 10px;\n        top: 10px; right: 10px;\n        background-color: #30b9e8;\n        color: white;\n        cursor: pointer;\n        text-decoration: none;\n\n        &.processing{\n            background-color: #7fc54e;\n        }\n\n        &.active{\n            background-color: #cc242b;\n        }\n    }\n}\n"],sourceRoot:""}]),e.default=o},function(n,e,t){"use strict";t.r(e);var r=t(1),o={name:"yandexMap",data:function(){return{map:null,YandexMapBus:r.a,mapId:"yandex-map-"+Math.round(1e6*Math.random()),style:this.ymapClass?"":"width: 100%; height: 100%; min-height: 10px",mapClass:"yandex-map"}},props:{center:{type:Array,validator:function(n){return!n.filter((function(n){return isNaN(n)})).length},required:!1},controls:{type:Array,validator:function(n){return!n.filter((function(n){return isNaN(n)})).length},required:!1,default:function(){return[]}},zoom:{validator:function(n){return!isNaN(n)},default:15},dragable:{type:Boolean,default:!0},scrollZoom:{type:Boolean,default:!0}},methods:{getMap:function(){return this.map},init:function(){var n=this;console.log("on yandexmap-ready");var e=this.center?this.center:[55.753215,37.622504];this.map=new window.ymaps.Map(this.mapId,{center:e,zoom:this.zoom,controls:this.controls,type:"yandex#map"},{}),this.dragable||this.map.behaviors.disable("drag"),this.scrollZoom||this.map.behaviors.disable("scrollZoom"),this.map.events.add("click",(function(e){var t=e.get("coordPosition");n.$emit("click",n.map,t)})),this.map.events.add("boundschange",(function(e){var t=e.get("newBounds");n.$emit("boundschange",n.map,t)})),this.$emit("created",this.map)}},mounted:function(){var n=this;this.YandexMapBus.attachScript(),this.YandexMapBus.$on("yandexmap-attached",(function(){})),this.YandexMapBus.$on("yandexmap-loaded",(function(){})),this.YandexMapBus.$on("yandexmap-ready",(function(){n.init()})),this.YandexMapBus.ymapReady&&this.init()},beforeDestroy:function(){this.$emit("destroy",this.map)}},a=function(){var n=this.$createElement,e=this._self._c||n;return e("div",{class:this.mapClass},[this._t("default"),this._v(" "),e("div",{class:this.mapClass+"__container",style:this.style,attrs:{id:this.mapId}})],2)};a._withStripped=!0;var i=t(2),s=Object(i.a)(o,a,[],!1,null,null,null);s.options.__file="src/Components/YandexMapContainer.vue";e.default=s.exports},function(n,e,t){"use strict";t.r(e);var r=t(1),o={name:"RegionSelect",data:function(){return{map:null,drag:!1,selected:!1,mapInit:!1,dragger:null,dragger_polygon:null,dragger_polyline:null}},props:{region:{type:Array,required:!1,default:function(){return[]}},buttonText:{type:String,required:!1,default:"Select region"},buttonSelectedText:{type:String,required:!1,default:"Clear selection"},buttonCancelText:{type:String,required:!1,default:"Cancel"},buttonClass:{type:String,required:!1,default:""}},methods:{buttonClick:function(n){n.preventDefault(),n.stopPropagation(),!1===this.selected&&!1===this.drag?(this.initDragger(),this.$emit("status","init")):!1===this.selected&&!0===this.drag?(this.stopDragger(),this.$emit("status","cancel")):!0===this.selected&&(this.removeDragger(),this.$emit("status","selected"))},init:function(n){this.map=n,Array.isArray(this.region)&&this.region.length>0&&(this.dragger_polygon=new ymaps.Polygon([this.region.slice()],{hintContent:""},{fillColor:"#6699ff",interactivityModel:"default#transparent",strokeWidth:1,opacity:.2}),this.selected=!0,this.map.geoObjects.add(this.dragger_polygon),this.$emit("changed",this.region))},stopDragger:function(){console.log("stopDragger"),this.dragger.events.group().removeAll(),this.drag=!1},initDragger:function(){var n=this;if(!this.map)return console.warn("yandexmap: map not ready"),null;var e=this;this.drag=!0;var t=this.map.cursors.push("crosshair");this.map.behaviors.disable("drag"),this.map.events.add("mousedown",(function(r){var o=[n.convert(r.get("position"))],a=n.dragger.events.group();a.add("move",(function(t){o.push(n.convert(t.get("position"))),n.dragger_polyline?n.dragger_polyline.geometry.setCoordinates(o.slice()):(n.dragger_polyline=new ymaps.Polyline(o.slice(),{},{strokeColor:"#e4300e",strokeWidth:2,strokeStyle:"0 0"}),n.map.geoObjects.add(e.dragger_polyline))})).add("stop",(function(r){n.drag=!1,t.remove(),n.map.behaviors.enable("drag"),n.dragger_polyline&&(n.map.geoObjects.remove(e.dragger_polyline),n.dragger_polyline=null),o.length>2?(n.dragger_polygon&&n.map.geoObjects.remove(e.dragger_polygon),n.dragger_polygon=new ymaps.Polygon([o.slice()],{hintContent:""},{fillColor:"#6699ff",interactivityModel:"default#transparent",strokeWidth:1,opacity:.2}),n.map.geoObjects.add(e.dragger_polygon),n.$emit("changed",o,e.dragger_polygon),n.selected=!0):(n.selected=!1,n.$emit("changed",[],e.dragger_polygon)),a.removeAll()})),n.dragger.start(r)}))},removeDragger:function(){if(!this.map)return console.warn("yandexmap: map not ready"),null;this.map.behaviors.enable("drag"),this.map.events.remove("mousedown"),this.map.geoObjects.remove(this.dragger_polyline),this.map.geoObjects.remove(this.dragger_polygon),this.map.cursors.push("crosshair").remove(),this.dragger_polyline=null,this.dragger_polygon=null,this.$emit("changed",[]),this.drag=!1,this.selected=!1},convert:function(n){return this.map?this.map.options.get("projection").fromGlobalPixels(this.map.converter.pageToGlobal(n),this.map.getZoom()):(console.warn("yandexmap: map not ready"),[])}},mounted:function(){var n=this;r.a.ymapReady&&(this.dragger=new ymaps.util.Dragger,this.mapInit=!0),r.a.$on("yandexmap-ready",(function(){n.dragger=new ymaps.util.Dragger,n.mapInit=!0})),this.$parent.$on("created",(function(e){n.init(e)}))},computed:{computedButtonText:function(){return!0===this.drag?this.buttonCancelText:!0===this.selected?this.buttonSelectedText:this.buttonText},computedButtonClass:function(){return[this.buttonClass,!0===this.drag?"processing":!0===this.selected?"active":""]}}},a=function(){var n=this.$createElement,e=this._self._c||n;return!0!==this.map?e("div",{staticClass:"yandex-map_region"},[e("a",{class:this.computedButtonClass,on:{click:this.buttonClick}},[this._v(this._s(this.computedButtonText))])]):this._e()};a._withStripped=!0;var i=t(2);var s=function(n){t(5)},c=Object(i.a)(o,a,[],!1,s,null,null);c.options.__file="src/Components/RegionSelect.vue";e.default=c.exports},function(n,e,t){"use strict";function r(n,e){for(var t=[],r={},o=0;o<e.length;o++){var a=e[o],i=a[0],s={id:n+":"+o,css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(s):t.push(r[i]={id:i,parts:[s]})}return t}t.r(e),t.d(e,"default",(function(){return f}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},i=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,d=function(){},l=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(n,e,t,o){u=t,l=o||{};var i=r(n,e);return g(i),function(e){for(var t=[],o=0;o<i.length;o++){var s=i[o];(c=a[s.id]).refs--,t.push(c)}e?g(i=r(n,e)):i=[];for(o=0;o<t.length;o++){var c;if(0===(c=t[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete a[c.id]}}}}function g(n){for(var e=0;e<n.length;e++){var t=n[e],r=a[t.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](t.parts[o]);for(;o<t.parts.length;o++)r.parts.push(m(t.parts[o]));r.parts.length>t.parts.length&&(r.parts.length=t.parts.length)}else{var i=[];for(o=0;o<t.parts.length;o++)i.push(m(t.parts[o]));a[t.id]={id:t.id,refs:1,parts:i}}}}function h(){var n=document.createElement("style");return n.type="text/css",i.appendChild(n),n}function m(n){var e,t,r=document.querySelector('style[data-vue-ssr-id~="'+n.id+'"]');if(r){if(u)return d;r.parentNode.removeChild(r)}if(p){var o=c++;r=s||(s=h()),e=A.bind(null,r,o,!1),t=A.bind(null,r,o,!0)}else r=h(),e=b.bind(null,r),t=function(){r.parentNode.removeChild(r)};return e(n),function(r){if(r){if(r.css===n.css&&r.media===n.media&&r.sourceMap===n.sourceMap)return;e(n=r)}else t()}}var y,v=(y=[],function(n,e){return y[n]=e,y.filter(Boolean).join("\n")});function A(n,e,t,r){var o=t?"":r.css;if(n.styleSheet)n.styleSheet.cssText=v(e,o);else{var a=document.createTextNode(o),i=n.childNodes;i[e]&&n.removeChild(i[e]),i.length?n.insertBefore(a,i[e]):n.appendChild(a)}}function b(n,e){var t=e.css,r=e.media,o=e.sourceMap;if(r&&n.setAttribute("media",r),l.ssrId&&n.setAttribute("data-vue-ssr-id",e.id),o&&(t+="\n/*# sourceURL="+o.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}}])}));
//# sourceMappingURL=index.js.map